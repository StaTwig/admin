(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[3],{1500:function(e,t,o){},1501:function(e,t,o){},1503:function(e,t,o){"use strict";o.r(t);var a=o(4),l=o(3),i=o(1),n=(o(1496),o(10)),s=o(1497),r=o.n(s),d=o(1498),c=o.n(d),u=(o(1499),o(1500),o(0));r.a.accessToken="pk.eyJ1IjoidGhyaW5ldGhyYSIsImEiOiJja2wzdDAwMWYwN3JuMm5uMTQxcjQyb2w2In0.XfGU-QlqlhgTpjm2I_Ye9Q";var v=function(e){var t,o=e.t,a=e.lang,s=Object(i.useRef)(null),d=Object(i.useState)(5),v=Object(l.a)(d,2),h=v[0],p=v[1],b=Object(i.useState)(34),j=Object(l.a)(b,2),f=j[0],g=j[1],m=Object(i.useState)(1.5),w=Object(l.a)(m,2),x=w[0],O=w[1],y=["#a8a8a8","#0194e9","#fa7924","#ffab1c"],F=e.warehouseLocation,L=e.warehouseArr,M=e.visible,C=e.shipment,k=[],N=Object(n.e)((function(e){return e.user}));function S(e){return e*Math.PI/180}function T(e){return e*(180/Math.PI)}return Object(i.useEffect)((function(){var e=new r.a.Map({container:s.current,style:"mapbox://styles/mapbox/light-v10",center:[h,f],zoom:x});if(null!==F&&void 0!==F&&F.latitude){e=new r.a.Map({container:s.current,style:"mapbox://styles/mapbox/light-v10",center:[parseFloat(F.longitude),parseFloat(F.latitude)],zoom:2}),p(F.longitude),g(parseFloat(F.latitude));var l=[parseFloat(F.longitude),parseFloat(F.latitude)];t=(new r.a.Marker).setLngLat(l).addTo(e),k.push(t)}if(L.length>0&&L.forEach((function(o,a){var l;if(null!==(l=o.location)&&void 0!==l&&l.latitude){0===a&&(e=new r.a.Map({container:s.current,style:"mapbox://styles/mapbox/light-v10",center:[parseFloat(o.location.longitude),parseFloat(o.location.latitude)],zoom:2}),p(parseFloat(o.location.longitude)),g(parseFloat(o.location.latitude)));var i=[parseFloat(o.location.longitude),parseFloat(o.location.latitude)],n={color:y[Math.floor(3*Math.random())+1]};F&&(n.color=y[0],F.latitude===o.location.latitude&&F.longitude===o.location.longitude&&(n.color=y[Math.floor(3*Math.random())+1],n.scale=2)),t=new r.a.Marker(n).setLngLat(i).addTo(e),k.push(t)}})),M&&void 0!==(null===C||void 0===C?void 0:C.supplier)){var i,n,d,u,v,b,j,m,w,I,A,W,_,z,J,P,D,E,H,Q,B,G,Y,q,U,V,Z,R,X,K,$,ee,te,oe,ae,le,ie,ne,se,re,de,ce,ue={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"LineString",properties:{},coordinates:[[parseFloat(null===C||void 0===C||null===(i=C.receiver)||void 0===i||null===(n=i.warehouse)||void 0===n||null===(d=n.location)||void 0===d?void 0:d.longitude),parseFloat(null===C||void 0===C||null===(u=C.receiver)||void 0===u||null===(v=u.warehouse)||void 0===v||null===(b=v.location)||void 0===b?void 0:b.latitude)],[parseFloat(null===C||void 0===C||null===(j=C.supplier)||void 0===j||null===(m=j.warehouse)||void 0===m||null===(w=m.location)||void 0===w?void 0:w.longitude),parseFloat(null===C||void 0===C||null===(I=C.supplier)||void 0===I||null===(A=I.warehouse)||void 0===A||null===(W=A.location)||void 0===W?void 0:W.latitude)]]}}]};e.on("load",(function(){e.addSource("LineString",{type:"geojson",data:ue}),e.addLayer({id:"LineString",type:"line",source:"LineString",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#BF93E4","line-width":5}})})),t=(new r.a.Marker).setLngLat([parseFloat(null===C||void 0===C||null===(_=C.receiver)||void 0===_||null===(z=_.warehouse)||void 0===z||null===(J=z.location)||void 0===J?void 0:J.longitude),parseFloat(null===C||void 0===C||null===(P=C.receiver)||void 0===P||null===(D=P.warehouse)||void 0===D||null===(E=D.location)||void 0===E?void 0:E.latitude)]).addTo(e),k.push(t),t=(new r.a.Marker).setLngLat([parseFloat(null===C||void 0===C||null===(H=C.supplier)||void 0===H||null===(Q=H.warehouse)||void 0===Q||null===(B=Q.location)||void 0===B?void 0:B.longitude),parseFloat(null===C||void 0===C||null===(G=C.supplier)||void 0===G||null===(Y=G.warehouse)||void 0===Y||null===(q=Y.location)||void 0===q?void 0:q.latitude)]).addTo(e),k.push(t);var ve=function(e,t,o,a){var l=S(a-t);e=S(e),o=S(o),t=S(t);var i=Math.cos(o)*Math.cos(l),n=Math.cos(o)*Math.sin(l),s=Math.atan2(Math.sin(e)+Math.sin(o),Math.sqrt((Math.cos(e)+i)*(Math.cos(e)+i)+n*n)),r=t+Math.atan2(n,Math.cos(e)+i);return{lat:T(s),long:T(r)}}(parseFloat(null===C||void 0===C||null===(U=C.receiver)||void 0===U||null===(V=U.warehouse)||void 0===V||null===(Z=V.location)||void 0===Z?void 0:Z.latitude),parseFloat(null===C||void 0===C||null===(R=C.receiver)||void 0===R||null===(X=R.warehouse)||void 0===X||null===(K=X.location)||void 0===K?void 0:K.longitude),parseFloat(null===C||void 0===C||null===($=C.supplier)||void 0===$||null===(ee=$.warehouse)||void 0===ee||null===(te=ee.location)||void 0===te?void 0:te.latitude),parseFloat(null===C||void 0===C||null===(oe=C.supplier)||void 0===oe||null===(ae=oe.warehouse)||void 0===ae||null===(le=ae.location)||void 0===le?void 0:le.longitude));p(ve.long),g(ve.lat),new r.a.Popup({offset:25,className:"popUp",closeOnClick:!1}).setLngLat([ve.long,ve.lat]).setHTML('<div class="pt-1 text-white pb-1 pl-2 pr-2">\n              <div class="row"><span class="col-7 disabled">'.concat(o("shipment_id"),':</span> <span class=" col-3 font-weight-bold">').concat(C.id,'</span></div>\n              <div class="row"> <span class="col-5 disabled text-decoration-underline"> ').concat(null===N||void 0===N?void 0:N.walletAddress,'</span> </div>\n              <div class="row pt-1 pb-1">\n                <div class="col-1"> </div> \n                <div class="col-2 disabled">').concat(o("from"),':</div> \n                <div class="col">\n                  <div class="font-weight-bold">').concat(C.supplier.org.name,' </div>\n                  <div class="disabled">').concat(null===(ie=C.supplier)||void 0===ie||null===(ne=ie.warehouse)||void 0===ne||null===(se=ne.warehouseAddress)||void 0===se?void 0:se.city,'</div>\n                </div>\n              </div>\n              <div class="row pt-1 pb-1">\n                <div class="col-1"> </div>\n                <div class="col-2 disabled">').concat(o("to"),':</div>\n                <div class="col">\n                  <div class="font-weight-bold">').concat(C.receiver.org.name,'</div>\n                  <div class="disabled">').concat(null===(re=C.receiver)||void 0===re||null===(de=re.warehouse)||void 0===de||null===(ce=de.warehouseAddress)||void 0===ce?void 0:ce.city,"</div>\n                </div>\n              </div>\n            </div>")).addTo(e)}e.addControl(new r.a.NavigationControl,"top-right"),e.on("move",(function(){p(e.getCenter().lng.toFixed(4)),g(e.getCenter().lat.toFixed(4)),O(e.getZoom().toFixed(2))}));var he=new c.a({defaultLanguage:a});return e.addControl(he),function(){return e.remove()}}),[e]),Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{className:"sidebarStyle",children:Object(u.jsxs)("div",{children:["Longitude: ",h," | Latitude: ",f," | Zoom: ",x]})}),Object(u.jsx)("div",{className:"map-container",ref:s})]})},h=o(1449),p=o(1450),b=o(1502),j=(o(1501),function(e){var t=e.filteredWareHouses,o=e.visible,n=e.setVisible,s=e.setWarehouseText,r=e.onWarehouseChange,d=e.onSearchClick,c=e.setContent,v=e.setDashVisible,j=e.warehouseArr,f=e.setWarehouseArr,g=e.setDashBarData,m=e.t,w=Object(i.useState)(!1),x=Object(l.a)(w,2),O=x[0],y=x[1];return console.log(t),Object(u.jsx)("div",{className:"dashboardtabs",children:Object(u.jsxs)("ul",{className:"nav nav-pills mb-2 flex-sb",children:[Object(u.jsxs)("div",{className:"left-flex",children:[Object(u.jsx)("li",{className:o?"nav-item":"nav-item-active",onClick:function(){j.length>0&&f([]),s(""),v(!1),g({}),n(!1)},children:Object(u.jsx)("div",{className:o?"nav-link text-secondary":"nav-link",children:m("storage_location")})}),Object(u.jsx)("li",{className:o?"nav-item-active ":"nav-item",onClick:function(){j.length>0&&f([]),s(""),v(!1),g({}),n(!0)},children:Object(u.jsx)("div",{className:o?"nav-link":"nav-link text-secondary",children:m("shipment")})})]}),Object(u.jsxs)("div",{className:"right-flex",children:[Object(u.jsx)("div",{children:Object(u.jsxs)("div",{style:{position:"relative"},children:[Object(u.jsx)(p.a,{freeSolo:!0,id:"free-solo-2-demo",disableClearable:!0,sx:{width:"300px"},options:t.map((function(e){return e})),getOptionLabel:function(e){return o?e.id:e.title},onChange:function(e,t){d(t.id)},renderInput:function(e){return Object(u.jsx)(h.a,Object(a.a)(Object(a.a)({},e),{},{disableClearable:!0,placeholder:o?m("enter")+" "+m("shipment_id"):m("enter")+" "+m("location_id"),InputProps:Object(a.a)(Object(a.a)({},e.InputProps),{},{type:"searcH"}),onChange:function(e){O&&y(!1),r(e.target.value)},onClick:function(){return r("")},size:"small",className:"mi-auto-height"}))}}),Object(u.jsx)(b.a,{className:"network-search-icon darkblue",style:{},onClick:function(){return d()}})]})}),Object(u.jsx)("div",{children:!o&&Object(u.jsx)("button",{className:"mi-btn mi-btn-md mi-btn-primary",onClick:function(){c(!1),v(!0)},children:m("search")+" "+m("location")})})]})]})})}),f=o(39);t.default=function(e){var t=e.t,o=e.lang,n=e.warehouses,s=e.warehouseArr,r=e.warehouseLocation,d=e.shipment,c=e.shipmentIds,h=e.visible,p=Object(i.useState)(""),b=Object(l.a)(p,2),g=b[0],m=b[1],w=Object(i.useState)([]),x=Object(l.a)(w,2),O=x[0],y=x[1];Object(f.b)("network")||e.history.push("/profile");return Object(u.jsxs)("div",{className:"dashboard",children:[Object(u.jsx)("div",{style:{position:"relative",top:"-10px",right:"25px"},children:Object(u.jsx)("h1",{style:{paddingBottom:"10px"},className:"vl-heading-bdr black f-700",children:t("your_network")})}),Object(u.jsxs)("div",{className:"panel",children:[Object(u.jsx)(v,{shipment:d,visible:h,warehouseArr:s,warehouseLocation:r,t:t,lang:o}),Object(u.jsx)("div",{className:"",children:Object(u.jsx)(j,Object(a.a)(Object(a.a)({},e),{},{warehouseText:g,setWarehouseText:m,filteredWareHouses:O,onWarehouseChange:function(e){m(e),y(h?null===c||void 0===c?void 0:c.filter((function(t){return t.id.toLowerCase().includes(e.toLowerCase())})):null===n||void 0===n?void 0:n.filter((function(t){return t.title&&t.title.toLowerCase().includes(e.toLowerCase())||t.id.toLowerCase().includes(e.toLowerCase())})))},onSearchClick:function(t){return e.onSearchClick(t)}}))})]})]})}}}]);