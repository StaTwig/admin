(this["webpackJsonpcra-frontend"]=this["webpackJsonpcra-frontend"]||[]).push([[4],{1051:function(e,o,t){},1052:function(e,o,t){},1053:function(e,o,t){"use strict";t.r(o);var i=t(5),l=t(4),a=t(1),n=(t(448),t(10)),s=t(1039),r=t.n(s),d=(t(1050),t(1051),t(0));r.a.accessToken="pk.eyJ1IjoidGhyaW5ldGhyYSIsImEiOiJja2wzdDAwMWYwN3JuMm5uMTQxcjQyb2w2In0.XfGU-QlqlhgTpjm2I_Ye9Q";var c=function(e){var o,t=Object(a.useRef)(null),i=Object(a.useState)(5),s=Object(l.a)(i,2),c=s[0],u=s[1],v=Object(a.useState)(34),h=Object(l.a)(v,2),p=h[0],b=h[1],j=Object(a.useState)(1.5),m=Object(l.a)(j,2),w=m[0],f=m[1],g=["#a8a8a8","#0194e9","#fa7924","#ffab1c"],O=e.warehouseLocation,x=e.warehouseArr,F=e.visible,L=e.shipment,M=[],y=Object(n.e)((function(e){return e.user}));function C(e){return e*Math.PI/180}function k(e){return e*(180/Math.PI)}return Object(a.useEffect)((function(){var e=new r.a.Map({container:t.current,style:"mapbox://styles/mapbox/light-v10",center:[c,p],zoom:w});if(null===O||void 0===O?void 0:O.latitude){e=new r.a.Map({container:t.current,style:"mapbox://styles/mapbox/light-v10",center:[parseFloat(O.longitude),parseFloat(O.latitude)],zoom:2}),u(O.longitude),b(parseFloat(O.latitude));var i=[parseFloat(O.longitude),parseFloat(O.latitude)];o=(new r.a.Marker).setLngLat(i).addTo(e),M.push(o)}if(x.length>0&&x.forEach((function(i,l){var a;if(null===(a=i.location)||void 0===a?void 0:a.latitude){0===l&&(e=new r.a.Map({container:t.current,style:"mapbox://styles/mapbox/light-v10",center:[parseFloat(i.location.longitude),parseFloat(i.location.latitude)],zoom:2}),u(parseFloat(i.location.longitude)),b(parseFloat(i.location.latitude)));var n=[parseFloat(i.location.longitude),parseFloat(i.location.latitude)],s={color:g[Math.floor(3*Math.random())+1]};O&&(s.color=g[0],O.latitude===i.location.latitude&&O.longitude===i.location.longitude&&(s.color=g[Math.floor(3*Math.random())+1],s.scale=2)),o=new r.a.Marker(s).setLngLat(n).addTo(e),M.push(o)}})),F&&void 0!==(null===L||void 0===L?void 0:L.supplier)){var l,a,n,s,d,v,h,j,m,N,S,T,I,W,A,D,E,J,z,P,Q,Y,G,H,R,U,q,B,V,Z,K,X,_,$,ee,oe,te,ie,le,ae,ne,se,re={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"LineString",properties:{},coordinates:[[parseFloat(null===L||void 0===L||null===(l=L.receiver)||void 0===l||null===(a=l.warehouse)||void 0===a||null===(n=a.location)||void 0===n?void 0:n.longitude),parseFloat(null===L||void 0===L||null===(s=L.receiver)||void 0===s||null===(d=s.warehouse)||void 0===d||null===(v=d.location)||void 0===v?void 0:v.latitude)],[parseFloat(null===L||void 0===L||null===(h=L.supplier)||void 0===h||null===(j=h.warehouse)||void 0===j||null===(m=j.location)||void 0===m?void 0:m.longitude),parseFloat(null===L||void 0===L||null===(N=L.supplier)||void 0===N||null===(S=N.warehouse)||void 0===S||null===(T=S.location)||void 0===T?void 0:T.latitude)]]}}]};e.on("load",(function(){e.addSource("LineString",{type:"geojson",data:re}),e.addLayer({id:"LineString",type:"line",source:"LineString",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#BF93E4","line-width":5}})})),o=(new r.a.Marker).setLngLat([parseFloat(null===L||void 0===L||null===(I=L.receiver)||void 0===I||null===(W=I.warehouse)||void 0===W||null===(A=W.location)||void 0===A?void 0:A.longitude),parseFloat(null===L||void 0===L||null===(D=L.receiver)||void 0===D||null===(E=D.warehouse)||void 0===E||null===(J=E.location)||void 0===J?void 0:J.latitude)]).addTo(e),M.push(o),o=(new r.a.Marker).setLngLat([parseFloat(null===L||void 0===L||null===(z=L.supplier)||void 0===z||null===(P=z.warehouse)||void 0===P||null===(Q=P.location)||void 0===Q?void 0:Q.longitude),parseFloat(null===L||void 0===L||null===(Y=L.supplier)||void 0===Y||null===(G=Y.warehouse)||void 0===G||null===(H=G.location)||void 0===H?void 0:H.latitude)]).addTo(e),M.push(o);var de=function(e,o,t,i){var l=C(i-o);e=C(e),t=C(t),o=C(o);var a=Math.cos(t)*Math.cos(l),n=Math.cos(t)*Math.sin(l),s=Math.atan2(Math.sin(e)+Math.sin(t),Math.sqrt((Math.cos(e)+a)*(Math.cos(e)+a)+n*n)),r=o+Math.atan2(n,Math.cos(e)+a);return{lat:k(s),long:k(r)}}(parseFloat(null===L||void 0===L||null===(R=L.receiver)||void 0===R||null===(U=R.warehouse)||void 0===U||null===(q=U.location)||void 0===q?void 0:q.latitude),parseFloat(null===L||void 0===L||null===(B=L.receiver)||void 0===B||null===(V=B.warehouse)||void 0===V||null===(Z=V.location)||void 0===Z?void 0:Z.longitude),parseFloat(null===L||void 0===L||null===(K=L.supplier)||void 0===K||null===(X=K.warehouse)||void 0===X||null===(_=X.location)||void 0===_?void 0:_.latitude),parseFloat(null===L||void 0===L||null===($=L.supplier)||void 0===$||null===(ee=$.warehouse)||void 0===ee||null===(oe=ee.location)||void 0===oe?void 0:oe.longitude));u(de.long),b(de.lat),new r.a.Popup({offset:25,className:"popUp",closeOnClick:!1}).setLngLat([de.long,de.lat]).setHTML('<div class="pt-1 text-white pb-1 pl-2 pr-2">\n              <div class="row"><span class="col-5 disabled">Shipment ID:</span> <span class=" col-3 font-weight-bold">'.concat(L.id,'</span></div>\n              <div class="row"> <span class="col-5 disabled text-decoration-underline"> ').concat(null===y||void 0===y?void 0:y.walletAddress,'</span> </div>\n              <div class="row pt-1 pb-1">\n                <div class="col-1"> </div> \n                <div class="col-2 disabled">From</div> \n                <div class="col">\n                  <div class="font-weight-bold">').concat(L.supplier.org.name,' </div>\n                  <div class="disabled">').concat(null===(te=L.supplier)||void 0===te||null===(ie=te.warehouse)||void 0===ie||null===(le=ie.warehouseAddress)||void 0===le?void 0:le.city,'</div>\n                </div>\n              </div>\n              <div class="row pt-1 pb-1">\n                <div class="col-1"> </div>\n                <div class="col-2 disabled">To</div>\n                <div class="col">\n                  <div class="font-weight-bold">').concat(L.receiver.org.name,'</div>\n                  <div class="disabled">').concat(null===(ae=L.receiver)||void 0===ae||null===(ne=ae.warehouse)||void 0===ne||null===(se=ne.warehouseAddress)||void 0===se?void 0:se.city,"</div>\n                </div>\n              </div>\n            </div>")).addTo(e)}return e.addControl(new r.a.NavigationControl,"top-right"),e.on("move",(function(){u(e.getCenter().lng.toFixed(4)),b(e.getCenter().lat.toFixed(4)),f(e.getZoom().toFixed(2))})),function(){return e.remove()}}),[e]),Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{className:"sidebarStyle",children:Object(d.jsxs)("div",{children:["Longitude: ",c," | Latitude: ",p," | Zoom: ",w]})}),Object(d.jsx)("div",{className:"map-container",ref:t})]})},u=t(116),v=(t(1052),function(e){var o=e.filteredWareHouses,t=e.visible,i=e.setVisible,n=e.warehouseText,s=e.setWarehouseText,r=e.onWarehouseChange,c=e.onSearchClick,v=e.setContent,h=e.setDashVisible,p=e.warehouseArr,b=e.setWarehouseArr,j=e.setDashBarData,m=Object(a.useState)(!1),w=Object(l.a)(m,2),f=w[0],g=w[1];return Object(d.jsx)("div",{className:"dashboardtabs",children:Object(d.jsxs)("ul",{className:"nav nav-pills mb-2",children:[Object(d.jsx)("li",{className:t?"nav-item":"nav-item-active",onClick:function(){p.length>0&&b([]),s(""),h(!1),j({}),i(!1)},children:Object(d.jsx)("div",{className:t?"nav-link text-secondary":"nav-link",children:"Storage Location"})}),Object(d.jsx)("li",{className:t?"nav-item-active ":"nav-item",onClick:function(){p.length>0&&b([]),s(""),h(!1),j({}),i(!0)},children:Object(d.jsx)("div",{className:t?"nav-link":"nav-link text-secondary",children:"Shipment"})}),Object(d.jsx)("li",{children:Object(d.jsxs)("div",{className:"search-form",children:[Object(d.jsx)("input",{type:"text",value:n,onChange:function(e){f&&g(!1),r(e.target.value)},placeholder:t?"Enter Shipment ID":"Enter Location ID",className:"form-control search-field"}),Object(d.jsx)("img",{src:u.a,onClick:function(){return c(n)},alt:"searching"}),""!==n&&!f&&Object(d.jsx)("div",{className:"bg-white m-1 p-2 position-absolute rounded",style:{width:250},children:null===o||void 0===o?void 0:o.map((function(e,o){return Object(d.jsx)("p",{className:"p-2 m-1 cursorP border-bottom",onClick:function(){g(!0),r(t?e.id:e.title),c(e.id)},children:t?e.id:e.title?e.title:e.id},o)}))})]})}),Object(d.jsx)("li",{children:!t&&Object(d.jsx)("button",{className:" btn-primary btn warehouse",onClick:function(){v(!1),h(!0)},children:"Search Location"})})]})})}),h=t(21);o.default=function(e){var o=e.warehouses,t=e.warehouseArr,n=e.warehouseLocation,s=e.shipment,r=e.shipmentIds,u=e.visible,p=Object(a.useState)(""),b=Object(l.a)(p,2),j=b[0],m=b[1],w=Object(a.useState)([]),f=Object(l.a)(w,2),g=f[0],O=f[1];Object(h.b)("network")||e.history.push("/profile");return Object(d.jsxs)("div",{className:"dashboard",children:[Object(d.jsx)("div",{style:{position:"relative",top:"-22px",right:"25px"},children:Object(d.jsx)("h1",{className:"breadcrumb dash",children:"YOUR NETWORK "})}),Object(d.jsxs)("div",{className:"panel",children:[Object(d.jsx)(c,{shipment:s,visible:u,warehouseArr:t,warehouseLocation:n}),Object(d.jsx)("div",{className:"",children:Object(d.jsx)(v,Object(i.a)(Object(i.a)({},e),{},{warehouseText:j,setWarehouseText:m,filteredWareHouses:g,onWarehouseChange:function(e){m(e),O(u?null===r||void 0===r?void 0:r.filter((function(o){return o.id.toLowerCase().includes(e.toLowerCase())})):null===o||void 0===o?void 0:o.filter((function(o){return o.title&&o.title.toLowerCase().includes(e.toLowerCase())||o.id.toLowerCase().includes(e.toLowerCase())})))},onSearchClick:function(o){return e.onSearchClick(o)}}))})]})]})}}}]);